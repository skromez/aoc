from collections import defaultdict

input = """
.#......................................#................#....#.......##..........................#.....#......#..................
......#...#...................................#......#...#........#...........................................#.#.................
.....................................................#.......#.............#................#...............#...#...........#.....
..........#...#.......#...........#.......................................#..............#.......#.#......#...............#.......
...#.......................................................................#.................................................#....
.......#.....#................#.......#..................#......#...........#...............................#.....................
.........#.......#..#...........................#........#.........................#..#.....#.....................................
..........#.......##....................#..............##..##..#...#........................................................#.....
................#............................................................#.......................#...#........................
...............................................................................................#...........................#......
#.....#..............#...............#.........#................................................................#........#........
.....#..#.................................#......................................................................#................
............................................#.....................................................................................
.............#....................................#.................#...##........#....#....#.....................................
.............#.............#...........##..............#.........#....#................#....................#.....................
..#..#...#.............#....................................#.........................................................#...........
........................#......#...........#.....#....................#.........................#.................................
.................#................................................................................................................
.........#.......#..........#...............#................................#........................#.........#......#..........
.........................................#.........#..........#.........#........................#......................#.........
.#.....................#.............................#.....................#.............................................#........
...#..#........#...............#......................#..................#........................................#...#...........
..#...........#..........#......#...............#...............................................................#.................
......#..#.............................#.#..............#......#..................................................................
......#..........#....#...#.........#...................................................................#...........#.............
............#....#.....#..............................................#.......#..............#........................#...........
......#.................#...............................................................................#...................#.....
................#................#............................................................................#.....##............
.........#......................................#....#......#.......................................#........##..........#........
#........#.........................................#..........#..............#.......#............................................
.#..........##....................#......................................................................#................#..#....
...........................................#............................#..........................#....................#.........
......#.......................#.............#......................................................................#..............
..#.#.....#...#....#....#......#..................................#...................#...........................................
..#................................#...................................#...#..................................#.......#...........
....#...............#....................................#..#..............#.........#.........#.#..............................#.
..........#......#.........................#.#.................................#...........................................#.....#
..................##.................#...........#................................#.............................................#.
.....#......#................#....................................................#..............#.........................#......
#..............#........#..............................#...........#...............#.....#.............................#..........
..............#.........................#........................................................#..........................#..##.
...............................................................#..............................................#...................
......................#.............................................................##.........#...........................#.#....
.......#................................#................#...........................#...................#.........#..............
.................................................................#...#.............#.....#...............#........................
..............................................................#..#...............................#.......#...............#.#......
.....#.................#......................#..........................................#........................................
..............................#...............#......#..........#........................#................#......#................
.............................................#.........#..................................................................#.......
......#..........................#.............#....................................................#................#............
..................#..............................................#..........................................#.....................
..#.........................................#..............................#...#........................................#..#......
........#........................#................................................................................................
...............#...............................#.............#...........................#........................................
...............................................................................................#....#.............................
............#.....................#...........#.............#.......#..............#.....#.............................#...#......
..........#..........................................................#.#.......#..................................................
...#................................#.....................................................................#...................#...
...#..#...........................#............................#........#.......#.#..........#.......#............................
...................##......................................#..................##..............................#........#..........
................##.....................................................................#....................................#.....
....#......................................................#..............#....#.................................#................
......................#...#............................................................................................#..........
..#......................#.................................................#.....#.....................................##.........
....................##.......................#............#.#....#......#...........#.............#..#................#...#....##.
.....................................................................................#....#..........#............................
..................#...............................................#.....#..#............#.....................##.............#....
......#.................................................................#.....#........#..#.......................................
......#..............................................#........#................#..................................................
........#........#...........#....................#...............................#..........................................#....
.##............................................................#............#..............................................#......
........................#............................#.....#....................#............#....................................
...#......#.............#..#..#........#...............................................................................#..#....#..
#.....#...............................................#...#....#................#....#....................................#.......
.................................#..#...........................................................................................#.
..........#.........................#.....................#............................................#..........................
..............................#........#...................................#..#................................#...#.............#
...#....................#.............................#..............................#..#..#......................................
..........#...................#....................#.....##............................#.....................#....................
.................#..........#.........................##.....................................................#.........#..........
..........................................................#....................................#..........#.......................
.........................................................#.....#..#.................#..............................#..............
................#..................#...............#.............#......#............#.................#...................##.....
...................#.....#...............................#.................................#.........##...........................
......................#..........#..........#...................................#..............#......#...........................
...........................................................#......#...#.....................#.....#.......................#....#..
.....................#.........................#.......#.........#................................#.#....................#......#.
...............................#..............................................#......#.................................#........#.
........#...........................................#...#.........................................#.........................#..#..
..............#............................#.....#.....#.......#...^...........................#................#.........#.......
..........#.#..............#.........#.............#............................................................#.................
.......#..#......#.......................................................................#........................................
..........#..........................##.............#.....#..........#.............................................#..............
................#............#.....#................#....#......................................................#........#........
..#......................##.......................##.....#.....#.............................................#....................
....#...........#.................................................##........................#...#..#..............................
...........#..........................#..........................................#...#............................................
##......#.........#...........#...#................................##................#...................##......#................
.....................#...............#.............#..........#.#..................#....................#.......#.................
...#..#.....#............#.....#......#.#.........................................................................................
...#..............................................................................................................#.........#.....
..................#..........................#.................................................#..................................
..........#...................................#.......#..#.....#.................#............##.#......#........#...#............
.......#....#............................................................................#.......................#................
.......................#...................#..#.......#..#.............#................#.........................................
........#......................#.......#...........#......##................##..#......#.#....#........#..........................
...#..................................#........................#.....#..#.........................................................
..#.......#...........#.........#.##..........#...........................................#...........................#...........
...................#........................................#...........#.................#.#......................#.#............
#......................#.............................#................................#.............#....#...........#............
.........#...........................................#.....#......................................#.......................#.......
.......................#.#...............................#........................................................................
...........................#...............................................................#..............#.......................
.......##..................#..........#......#.....................#.#.............................##..#.................#........
#.#...........#..........................................................#.....#...##......#......................#..#............
..#.............................#................#.#.........##..........................................................#........
.......................................#.......................................#...#.........#.............#......................
....#.##................................................#....................................................#.#...........#......
...#............................#.....#............#..................................#..........................................#
.........#...#..................................#.................#................................#...#..........................
.....................................#.............................#...#..........#.................#........#.......#............
.........##........#.#.....................................................................................................#......
...............................#....#.......#............#......#...................................#...............#.............
....##.#.............................##..........#....#...................#..........................#......#.#.#.................
............#.........#.....#..............................#......................................................................
..........#...#...#.......................#.............#...................#.##.......#.................#......#.................
..#..#..#...............................#.............#.................................................................#...#.....
.......................#..#.......................#..............#............#..........#........#..............................#
.....#...............#...##...........#..................#........................................#.....#.....#...................
....#.....................................#..........#..........#..#.....#...#....#...#...............#..........................#
"""


dd = [[-1, 0], [0, 1], [1, 0], [0, -1]]
def find_loop_positions(grid):
    start_r = start_c = -1
    for r in range(len(grid)):
        for c in range(len(grid[r])):
            if grid[r][c] == '^':
                start_r, start_c = r, c
                break
        if start_r != -1:
            break
    
    seen = set()
    r, c = start_r, start_c
    dir = 0
    
    while True:
        seen.add((r, c))
        nextr, nextc = r + dd[dir][0], c + dd[dir][1]
        
        if r == 0 or r == len(grid) - 1 or c == 0 or c == len(grid[c]) - 1:
            break
            
        if grid[nextr][nextc] == '#':
            dir = (dir + 1) % 4
        else:
            r, c = nextr, nextc
    
    def creates_loop(obstacle_r, obstacle_c):
        seen_loop = set()
        r, c = start_r, start_c
        dir = 0
        
        while True:
            state = (r, c, dir)
            if state in seen_loop:
                return True
            seen_loop.add(state)
            
            nextr, nextc = r + dd[dir][0], c + dd[dir][1]
            
            if r == 0 or r == len(grid) - 1 or c == 0 or c == len(grid[c]) - 1:
                return False
                
            if grid[nextr][nextc] == '#' or (nextr == obstacle_r and nextc == obstacle_c):
                dir = (dir + 1) % 4
            else:
                r, c = nextr, nextc
    
    loop_count = 0
    for r, c in seen:
        if creates_loop(r, c):
            loop_count += 1
            
    return loop_count

# Create grid from input
grid = [list(row) for row in input.strip().split('\n')]
result = find_loop_positions(grid)
print(result)